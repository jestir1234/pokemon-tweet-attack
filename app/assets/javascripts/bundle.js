!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";document.addEventListener("DOMContentLoaded",function(e){function t(e){var t=1,n=setInterval(function(){t<=.1&&(clearInterval(n),e.style.display="none"),e.style.opacity=t,e.style.filter="alpha(opacity="+100*t+")",t-=.1*t},100)}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}console.log("dom is fully loaded, pokemon util running");for(var r=[],a=[],i=[],o=null,s=null,c=null,u=null,l=void 0,m=void 0,d=void 0,p={},h={},f=void 0,g=void 0,v="player1",y=0;y<6;y++){document.createElement("img").src="https://forums.windowscentral.com/attachments/nokia-glance-backgrounds/45742d1381464991t-pokeball-glance.png"}(function(){return $.ajax({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/?limit=150",success:function(e){r=r.concat(e.results)}})})().then(function(){return $.ajax({method:"POST",url:"api/pokemon",data:{pokemon:r}}).then(function(e){window.pokemon=e}).then(function(){return E()})});var T=function(e){return $.ajax({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/"+e+"/"}).then(function(e){return l=e})},b=function(e){return $.ajax({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/"+e+"/"}).then(function(e){return m=e})},w=function(e){return $.ajax({method:"POST",url:"api/twitter",data:{pokemon:e}})},k=function(e){return $.ajax({method:"GET",url:""+e}).then(function(e){f=e})},E=function(){for(var e=$("#pokemon-list"),t=[],n=0;n<150;n++)t.push(window.pokemon[n]);t.forEach(function(t){var n=(t.name,document.createElement("div")),r=(document.createElement("p"),document.createElement("img"));n.setAttribute("class","pokemon-item"),n.addEventListener("click",function(e){return C(t)}),r.src=t.image_url,n.appendChild(r),e.append(n)})},C=function(e){if(a.length<6){a.push(e);var t=document.createElement("img");t.src=e.image_url;$(".team-container")[0].appendChild(t),6===a.length&&x()}},x=function(){document.getElementById("ready-btn").setAttribute("class","show")},A=function(e){return $.ajax({method:"POST",url:"api/tones",data:{tweet:e}})},H=function(e,t){return $.ajax({method:"GET",url:"https://api.giphy.com/v1/gifs/search?q="+e+"+"+t+"&api_key=dc6zaTOxFJmzC",success:function(e){d=e}})},I=function(e){clearInterval(e)},M=function(){document.getElementById("gamescreen-canvas").width+=1},P=function(){W();var e=setInterval(M,10);setTimeout(function(){return I(e)},500),setTimeout(L,1e3),setTimeout(N,2e3),setTimeout(function(){return $("html, body").animate({scrollTop:"1000px"})},4e3)},_=function(){for(var e=0;e<6;e++){var t=Math.floor(Math.random()*r.length);i.push(window.pokemon[t])}var n=document.createElement("div");n.setAttribute("class","background-modal");var a=$(document).height().toString()+"px";n.style.height=a,document.getElementsByTagName("BODY")[0].appendChild(n),B()};$("#ready-btn").on("click",function(){return _()});var B=function(){var e=document.createElement("canvas");e.setAttribute("id","gamescreen-canvas");e.getContext("2d");$(".background-modal")[0].appendChild(e),setTimeout(function(){return $("html, body").animate({scrollTop:"0px"})},500),setTimeout(P,1e3)},L=function(){var e=document.getElementById("gamescreen-canvas"),t=e.getContext("2d"),n=document.createElement("img"),r=document.createElement("img");n.setAttribute("class","player1-pokeballs"),r.setAttribute("class","player2-pokeballs"),n.src="https://forums.windowscentral.com/attachments/nokia-glance-backgrounds/45742d1381464991t-pokeball-glance.png",r.src="https://forums.windowscentral.com/attachments/nokia-glance-backgrounds/45742d1381464991t-pokeball-glance.png",n.onload=function(){for(var a=0;a<6;)t.drawImage(n,.01*e.width+15*a,10,20,20*n.height/n.width),t.drawImage(r,.72*e.width+15*a,10,20,20*n.height/n.width),a+=1}},N=function(){var e=document.getElementsByClassName("background-modal")[0],t=document.createElement("img"),n=document.createElement("img");t.setAttribute("class","player1-sprite"),n.setAttribute("class","player2-sprite"),t.src="https://fc01.deviantart.net/fs71/f/2011/003/f/e/pokemon_trainer_denny_by_tsunami_dono-d36cgr5.png",n.src="https://s-media-cache-ak0.pinimg.com/originals/d8/5a/5c/d85a5cb0fe99e3fcf312f91026637eb1.png",e.appendChild(t),e.appendChild(n),j(),O()},O=function(){var e=Math.floor(Math.random()*i.length);b(i[e].id).then(function(){var t=m.stats[5].base_stat+m.base_experience,n=m.stats[4].base_stat,r=m.stats[3].base_stat,a=m.stats[0].base_stat;h[m.name]={totalHP:t,currentHP:t,attack:n,defense:r,speed:a,name:m.name,id:m.id},s=h[m.name],w(i[e]).then(function(t){h[m.name].tweets=t.tweets,setTimeout(function(){return me(i[e],"player2")},3e3)})})},S=function e(){s?(g={name:m.name,player:"player2",pokemon:h[m.name]},Q(h[s.name].tweets),setTimeout(function(){100*Math.random()>50&&$(".next-btn").trigger("click"),$(".tweet-container").trigger("click")},4e3)):(O(),setTimeout(function(){return e()},6e3))},j=function(){var e=document.getElementsByClassName("background-modal")[0],t=document.createElement("div"),n=document.createElement("div");t.setAttribute("class","waiting-area-container-p1"),n.setAttribute("class","waiting-area-container-p2"),e.appendChild(t),e.appendChild(n),a.forEach(function(e){var n=document.createElement("img");n.src=e.image_url,n.addEventListener("click",function(t){return Y(e)}),setTimeout(function(){return t.appendChild(n)},1e3)}),i.forEach(function(e){var t=document.createElement("img");t.src=e.image_url,setTimeout(function(){return n.appendChild(t)},1e3)})},G=function(){var e=document.getElementById("gamescreen-canvas"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),L(),R(t)},R=function(e){e.beginPath(),D&&(D.width<50&&D.width>25?e.strokeStyle="orange":D.width<25?e.strokeStyle="red":e.strokeStyle="green",D.width<=1&&(D={x:D.x,y:D.y,width:D.width,height:0}),e.strokeRect(D.x,D.y,D.width,D.height)),e.beginPath(),U&&(U.width<50&&U.width>25?e.strokeStyle="orange":U.width<25?e.strokeStyle="red":e.strokeStyle="green",U.width<=1&&(U={x:U.x,y:U.y,width:U.width,height:0}),e.strokeRect(U.x,U.y,U.width,U.height))},W=function(){var e=document.getElementById("gamescreen-canvas"),t=e.getContext("2d");setTimeout(function(){t.strokeText("C",.35*e.width,10)},1e3),setTimeout(function(){t.strokeText("H",.4*e.width,10)},1050),setTimeout(function(){t.strokeText("O",.45*e.width,10)},1100),setTimeout(function(){t.strokeText("O",.5*e.width,10)},1150),setTimeout(function(){t.strokeText("S",.55*e.width,10)},1200),setTimeout(function(){t.strokeText("E",.6*e.width,10)},1250),setTimeout(G,1800),setTimeout(function(){t.strokeText("Y",.4*e.width,10)},2e3),setTimeout(function(){t.strokeText("O",.45*e.width,10)},2050),setTimeout(function(){t.strokeText("U",.5*e.width,10)},2100),setTimeout(function(){t.strokeText("R",.55*e.width,10)},2150),setTimeout(G,2600),setTimeout(function(){t.strokeText("P",.35*e.width,10)},2700),setTimeout(function(){t.strokeText("O",.4*e.width,10)},2750),setTimeout(function(){t.strokeText("K",.45*e.width,10)},2800),setTimeout(function(){t.strokeText("E",.5*e.width,10)},2850),setTimeout(function(){t.strokeText("M",.55*e.width,10)},2900),setTimeout(function(){t.strokeText("O",.6*e.width,10)},2950),setTimeout(function(){t.strokeText("N",.65*e.width,10)},3e3),setTimeout(G,3300)},q=1,D=void 0,K=1,U=void 0,z=function(e){if("player1"===e){var t=o.currentHP/o.totalHP,n=80*t;q+=1;var r=document.getElementById("gamescreen-canvas"),a=r.getContext("2d");a.beginPath(),a.lineWidth="4",a.strokeStyle="green",q<n&&(a.rect(10,30,0+q,1),D={x:10,y:30,width:q,height:1},a.stroke())}else if("player2"===e){var i=s.currentHP/s.totalHP,c=80*i;K+=1;var u=document.getElementById("gamescreen-canvas"),l=u.getContext("2d");l.beginPath(),l.lineWidth="4",l.strokeStyle="green",K<c&&(l.rect(338-K,30,0+K,1),U={x:360-K,y:30,width:K,height:1},l.stroke())}},F=function(e,t,n){var r=document.getElementById("gamescreen-canvas"),a=r.getContext("2d");if(a.beginPath(),a.lineWidth="4",a.strokeStyle="green","player1"===e){var i=n.currentHP/n.totalHP,o=t/n.totalHP,s=Math.floor(80*i);o>=1&&(U={x:255,y:U.y,width:U.width,height:U.height});var c=setInterval(function(){U.width>=s&&U.width>=1&&(U={x:U.x+1,y:U.y,width:U.width-1,height:U.height},G())},50);setTimeout(function(){return clearInterval(c)},4e3)}else{var u=n.currentHP/n.totalHP,l=t/n.totalHP,m=Math.floor(80*u);l>=1&&(D={x:10,y:D.y,width:D.width,height:D.height});var d=setInterval(function(){D.width>=m&&D.width>=1&&(D={x:D.x,y:D.y,width:D.width-1,height:D.height},G())},50);setTimeout(function(){return clearInterval(d)},4e3)}},J=function(e){var t=setInterval(function(){return z(e)},50);setTimeout(function(){return clearInterval(t)},4e3)},Y=function(e){null===o&&"player1"===v&&(o="fetching...",T(e.id).then(function(){var t=l.stats[5].base_stat+l.base_experience,n=l.stats[4].base_stat,r=l.stats[3].base_stat,a=l.stats[0].base_stat;p[l.name]={totalHP:t,currentHP:t,attack:n,defense:r,speed:a,name:l.name,id:l.id},o=p[l.name],g={name:l.name,player:"player1",pokemon:p[l.name]},me(e,"player1"),w(e).then(function(e){p[l.name].tweets=e.tweets,Q(e.tweets)})}))},Z=function(e){for(var t=[];t.length<4;){var n=Math.floor(Math.random()*e.tweets.length),r=e.tweets[n];"en"==r.lang&&t.push(r)}return t},Q=function(e){var t=Z(e),n=document.getElementsByClassName("background-modal")[0],r=document.createElement("div");r.setAttribute("class","options-container");var a=document.createElement("h3");a.innerHTML="SELECT A TWEET ATTACK!",r.appendChild(a);var i=document.createElement("img");i.setAttribute("class","next-btn"),i.src="https://vignette1.wikia.nocookie.net/pokemongo/images/1/1b/Button_Next.png/revision/latest?cb=20160908143000",i.addEventListener("click",V),r.appendChild(i),c=t;var o=le(c[0]);r.appendChild(o),n.appendChild(r)},V=function(){document.getElementsByClassName("tweet-container")[0].setAttribute("class","hide");var e=document.getElementsByClassName("options-container")[0],t=c[0];c.shift(),c.push(t);var n=le(c[0]);setTimeout(function(){return e.appendChild(n)},1e3),e.appendChild(n)},X=function(e){$("html, body").animate({scrollTop:"0px"}),de(e.text,v),A(e).then(function(e){u=e;var t=ue(e);setTimeout(function(){return ee(t)},3e3)})},ee=function(e){var t=void 0,n=void 0;t="player1"===v?l.moves:m.moves;var r=void 0;if("anger"===e){n=g.name;var a=Math.floor(30*Math.random());r=t[a].move.name,k(t[a].move.url).then(function(){ne()})}else if("disgust"===e)n="nicolas+cage",r="nicolas+cage";else if("fear"===e)n="scared",r="scared";else if("joy"===e){n=g.name;var i=Math.floor(30*Math.random());r=t[i].move.name,k(t[i].move.url).then(function(){ne()})}else"sadness"===e?(n="crying",r="crying"):"none"===e&&(n="confused",r="confused");H(n,r).then(function(){return oe(r,e)})},te=function(e){return e[Math.floor(Math.random()*e.length)]},ne=function(){var e=g.pokemon.attack,t=Math.floor(100*Math.random()),n=f.power,r=(f.accuracy,e+n);if("player1"===g.player){var a=h[m.name].currentHP;h[m.name].currentHP-=r-h[m.name].defense,h[m.name].currentHP<=0&&(s=null,K=1),setTimeout(function(){return re(g.player,a,h[m.name])},3e3)}else{var i=p[l.name].currentHP;p[l.name].currentHP-=r-p[l.name].defense,p[l.name].currentHP<=0&&(o=null,q=1),setTimeout(function(){return re(g.player,i,p[l.name])},3e3)}},re=function(e,t,n){if("player1"===g.player){var r=document.getElementsByClassName("pokemon-gif-p2")[0],a=setInterval(function(){return r.setAttribute("id","invert-img")},200),i=setInterval(function(){return r.setAttribute("id","invert-img-none")},400);F(e,t,n),setTimeout(function(){return clearInterval(a)},2e3),setTimeout(function(){return clearInterval(i)},2400),n.currentHP<=0&&setTimeout(function(){return ae(n,e)},3500)}else{var o=document.getElementsByClassName("pokemon-gif-p1")[0],s=setInterval(function(){return o.setAttribute("id","invert-img")},200),c=setInterval(function(){return o.setAttribute("id","invert-img-none")},400);F(e,t,n),setTimeout(function(){return clearInterval(s)},2e3),setTimeout(function(){return clearInterval(c)},2400),n.currentHP<=0&&setTimeout(function(){return ae(n,e)},3500)}},ae=function(e,t){if("player1"===t){updatedOpponentTeam=[],i.forEach(function(t){t.id!==e.id&&updatedOpponentTeam.push(t)}),i=updatedOpponentTeam,ie(e,t);var n=document.getElementsByClassName("pokemon-gif-p2")[0];n.setAttribute("id","invert-img-half");var r=setInterval(function(){n.setAttribute("id","invert-img-quarter")},100),a=setInterval(function(){n.setAttribute("id","invert-img-half")},300);setTimeout(function(){return clearInterval(r)},2e3),setTimeout(function(){return clearInterval(a)},2e3),setTimeout(function(){return $(".pokemon-gif-p2").remove()},2e3)}else{o=null,ie(e,t);var s=document.getElementsByClassName("pokemon-gif-p1")[0];s.setAttribute("id","invert-img-half");var c=setInterval(function(){s.setAttribute("id","invert-img-quarter")},100),u=setInterval(function(){s.setAttribute("id","invert-img-half")},300);setTimeout(function(){return clearInterval(c)},2e3),setTimeout(function(){return clearInterval(u)},2e3),setTimeout(function(){return $(".pokemon-gif-p1").remove()},2e3)}},ie=function(e,t){if("player1"===t)for(var n=document.getElementsByClassName("waiting-area-container-p2")[0],r=n.children,a=0;a<r.length;a++){var i=r[a],o=i.src.slice(0,i.src.length-4),s=parseInt(o.slice(37));s===e.id&&n.removeChild(i)}else for(var c=document.getElementsByClassName("waiting-area-container-p1")[0],u=c.children,l=0;l<u.length;l++){var m=u[l],d=m.src.slice(0,m.src.length-4),p=parseInt(d.slice(37));p===e.id&&c.removeChild(m)}},oe=function(e,n){var r=document.createElement("div"),a=document.getElementsByClassName("background-modal")[0];r.setAttribute("class","attack-message"),"anger"===n||"joy"===n?r.innerHTML=g.name+" uses "+e+"!":"sadness"===n?r.innerHTML=g.name+" begins to cry!":"disgust"===n?r.innerHTML=g.name+" is disgusted!":"none"===n?r.innerHTML=g.name+" is confused...":"fear"===n&&(r.innerHTML=g.name+" is afraid..."),setTimeout(function(){return $(".options-container").remove()},1e3),a.appendChild(r);var i=te(d.data),o=document.createElement("img");o.setAttribute("class","pokemon-gif");var s="https://media.giphy.com/media/"+i.embed_url.slice(23)+"/giphy.gif";o.src=s,a.appendChild(o),setTimeout(function(){return a.removeChild(o)},5e3),setTimeout(function(){return t(r)},2e3),setTimeout(function(){return a.removeChild(r)},5e3),setTimeout(function(){return se()},8e3)},se=function(){v="player1"===v?"player2":"player1","player2"===v?S():ce()},ce=function(){o&&(g={name:l.name,player:"player1",pokemon:p[l.name]},Q(p[l.name].tweets))},ue=function(e){var t="Unavailable"!==e.scores?e.scores:{anger:{score:0},disgust:{score:0},fear:{score:0},joy:{score:0},sadness:{score:0}},n=0,r="none",a=t.anger?t.anger.score:0;a>n&&(r="anger",n=a);var i=t.disgust.score;i>n&&(r="disgust",n=i);var o=t.fear.score;o>n&&(r="fear",n=o);var s=t.joy.score;s>n&&(r="joy",n=s);var c=t.sadness.score;return c>n&&(r="sadness",n=c),r},le=function(e){var t=document.createElement("div");t.setAttribute("class","tweet-container"),t.addEventListener("click",function(){return X(e)});var n=document.createElement("div");n.setAttribute("class","tweet-header");var r=document.createElement("div");r.setAttribute("class","tweet-name-container");var a=document.createElement("div");a.setAttribute("class","tweet-image-container");var i=document.createElement("img");i.src=e.user.profile_image_url_https,a.appendChild(i);var o=document.createElement("h2");o.innerHTML=e.user.name;var s=document.createElement("p");s.innerHTML="@"+e.user.screen_name,r.appendChild(o),r.appendChild(s),n.appendChild(a),n.appendChild(r),t.appendChild(n);var c=document.createElement("p");c.setAttribute("class","tweet-text"),c.innerHTML=e.text,t.appendChild(c);var u=document.createElement("p");u.setAttribute("class","tweet-date"),u.innerHTML=e.created_at,t.appendChild(u);var l=document.createElement("div");l.setAttribute("class","tweet-stats");var m=document.createElement("div");m.setAttribute("class","retweet-container");var d=document.createElement("img");d.src="https://simpleicon.com/wp-content/uploads/retweet.png";var p=document.createElement("p");p.innerHTML=e.retweet_count,m.appendChild(d),m.appendChild(p);var h=document.createElement("div");h.setAttribute("class","favorites-container");var f=document.createElement("img");f.src="https://www.clker.com/cliparts/H/Z/c/f/2/H/solid-dark-grey-heart-md.png";var g=document.createElement("p");g.innerHTML=e.favorite_count,h.appendChild(f),h.appendChild(g);var v=document.createElement("p");return v.innerHTML=e.user.location,l.appendChild(m),l.appendChild(h),l.appendChild(v),t.appendChild(l),t},me=function(e,t){setTimeout(function(){return $("html, body").animate({scrollTop:"0"})},10),de(n(e.name)+", I choose you!",t),J(t);var r=void 0,a=void 0,i=void 0;"player1"===t?(r="pokeball-gif-p1",a="smoke-gif-p1",i="pokemon-gif-p1"):(r="pokeball-gif-p2",a="smoke-gif-p2",i="pokemon-gif-p2");var o=document.getElementById("gamescreen-canvas"),s=o.offsetLeft,c=document.getElementsByClassName("background-modal")[0],u=document.createElement("img");u.src="https://media.giphy.com/media/DJM88aCmEeaNG/giphy.gif",u.setAttribute("class",r),"player1"===t?u.style.left=(s-10).toString()+"px":(s=o.offsetRight,u.style.right=(s-10).toString()+"px");var l=document.createElement("img");l.setAttribute("class",a),l.src="https://media.giphy.com/media/drj4KPFH32Mw/giphy.gif",c.appendChild(u);var m=document.createElement("img");m.setAttribute("class",i),m.src=e.gif_url,setTimeout(function(){u.setAttribute("class","hide")},2400),setTimeout(function(){return c.appendChild(l)},2500),setTimeout(function(){l.setAttribute("class","hide")},3e3),setTimeout(function(){return c.appendChild(m)},3e3)},de=function(e,t){var n=document.createElement("div"),r=document.getElementsByClassName("background-modal")[0];"player1"===t?($(".speech-bubble-p1").remove(),n.setAttribute("class","speech-bubble-p1")):($(".speech-bubble-p2").remove(),n.setAttribute("class","speech-bubble-p2")),setTimeout(function(){return r.removeChild(n)},3500),n.innerHTML=pe(e),r.appendChild(n)},pe=function(e){return e.length>60&&(e=e.slice(0,50)),e}})}]);